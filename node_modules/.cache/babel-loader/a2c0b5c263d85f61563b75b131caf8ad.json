{"ast":null,"code":"import _objectSpread from\"C:/Users/Electro-Marke.ma/Documents/React-JS/market-place-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Electro-Marke.ma/Documents/React-JS/market-place-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import'./myPost.css';import{db}from'../../Firebase';import Zoom from'react-reveal/Zoom';import Slider from\"react-slick\";import{Link,useNavigate}from'react-router-dom';import Avatar from'@material-ui/core/Avatar';import cap from'../../images/cap-1.jpg';import cap2 from'../../images/cap-2.jpg';import{SideBarContext}from'../../contexts/SideBarContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MyPosts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),myPosts=_useState2[0],setMyPosts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),on=_useState4[0],setOn=_useState4[1];var _useContext=useContext(SideBarContext),value2=_useContext.value2;var _value=_slicedToArray(value2,2),activeUser=_value[0],setActiveUser=_value[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),ids=_useState6[0],setIds=_useState6[1];var navigate=useNavigate();var date=0;var item='';useEffect(function(){db.collection('posts').orderBy('timestamp','desc').onSnapshot(function(snapshot){return setIds(snapshot.docs.map(function(doc){if(activeUser&&doc.data().username.toLowerCase()===activeUser.toLowerCase()){// console.log(doc.data().timestamp.seconds)\nreturn doc.id;}else{return null;}}));});db.collection('posts').orderBy('timestamp','desc').onSnapshot(function(snapshot){return setMyPosts(snapshot.docs.map(function(doc){if(activeUser&&doc.data().username.toLowerCase()===activeUser.toLowerCase()){// console.log(doc.data().timestamp.seconds)\nreturn doc.data();}else{return null;}}));});},[activeUser]);var Delete=function Delete(id){db.collection('posts').doc(id).delete();setOn(false);};var settings={dots:false,infinite:true,speed:500,slidesToShow:1,slidesToScroll:1};return/*#__PURE__*/_jsx(\"div\",{className:\"my_posts_container\",children:myPosts&&ids&&myPosts.map(function(post,id){if(post!==null){item=0;date=new Date(post.timestamp.seconds);return/*#__PURE__*/_jsxs(\"div\",{className:\"my_post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post_header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(Avatar,{alt:post.username?post.username:'',className:\"avatar\",src:\"/static/images/avatar/1.jpg\"}),/*#__PURE__*/_jsx(\"h3\",{children:post.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-edit\",onClick:function onClick(){return navigate(\"/Post/\".concat(ids[id],\"/Edit\"));}}),/*#__PURE__*/_jsx(\"i\",{className:\"far fa-trash-alt\",onClick:function onClick(){return Delete(ids[id]);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post_image\",children:/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},settings),{},{className:\"slider\",children:Object.keys(post.imagesUrl).length!==0&&post.imagesUrl.map(function(image,i){return/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"\"},i);})}))}),/*#__PURE__*/_jsx(\"div\",{className:\"post_date\",children:/*#__PURE__*/_jsx(\"p\",{})})]},id);}})});}export default MyPosts;","map":{"version":3,"sources":["C:/Users/Electro-Marke.ma/Documents/React-JS/market-place-app/src/components/myPosts/MyPosts.js"],"names":["React","useState","useEffect","useContext","db","Zoom","Slider","Link","useNavigate","Avatar","cap","cap2","SideBarContext","MyPosts","myPosts","setMyPosts","on","setOn","value2","activeUser","setActiveUser","ids","setIds","navigate","date","item","collection","orderBy","onSnapshot","snapshot","docs","map","doc","data","username","toLowerCase","id","Delete","delete","settings","dots","infinite","speed","slidesToShow","slidesToScroll","post","Date","timestamp","seconds","Object","keys","imagesUrl","length","image","i"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,useContext} from 'react';\r\nimport './myPost.css';\r\nimport {db} from '../../Firebase';\r\nimport Zoom from 'react-reveal/Zoom';\r\nimport Slider from \"react-slick\";\r\nimport {Link,useNavigate} from 'react-router-dom';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport cap from '../../images/cap-1.jpg'\r\nimport cap2 from '../../images/cap-2.jpg'\r\nimport {SideBarContext} from '../../contexts/SideBarContext';\r\n\r\n\r\n\r\nfunction MyPosts() {\r\n    const [myPosts,setMyPosts] = useState([]);\r\n    const [on,setOn] = useState(false);\r\n    const {value2} = useContext(SideBarContext);\r\n    const [activeUser,setActiveUser] = value2;\r\n    const [ids,setIds] = useState([])\r\n    const navigate = useNavigate()\r\n    \r\n\r\nlet date = 0;\r\nlet item = '';\r\n\r\n    useEffect(()=>{\r\n        db.collection('posts').orderBy('timestamp','desc')\r\n        .onSnapshot(snapshot => \r\n            setIds(\r\n                snapshot.docs.map(doc => {\r\n                    if(activeUser && doc.data().username.toLowerCase() === activeUser.toLowerCase()){\r\n                        // console.log(doc.data().timestamp.seconds)\r\n                        \r\n                        return doc.id;\r\n                    }else{\r\n                        return null;\r\n                    }\r\n                })\r\n            ))\r\n            \r\n\r\n        db.collection('posts').orderBy('timestamp','desc')\r\n        .onSnapshot(snapshot => \r\n            setMyPosts(snapshot.docs.map(doc => {\r\n                if(activeUser && doc.data().username.toLowerCase() === activeUser.toLowerCase()){\r\n                    // console.log(doc.data().timestamp.seconds)\r\n                    \r\n                    return doc.data();\r\n                }else{\r\n                    return null;\r\n                }\r\n            })))        \r\n\r\n    },[activeUser])\r\n\r\n    const Delete = (id)=>{\r\n\r\n        db.collection('posts').doc(id).delete()\r\n        setOn(false)\r\n    }\r\n\r\n    const settings = {\r\n        dots: false,\r\n        infinite: true,\r\n        speed: 500,\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1\r\n      };\r\n    return (\r\n        <div className='my_posts_container'>\r\n        {myPosts && ids && myPosts.map((post,id) =>{\r\n            if(post !== null){\r\n                \r\n                item = 0\r\n                date = new Date(post.timestamp.seconds);\r\n                \r\n                \r\n                 \r\n                return(\r\n\r\n               \r\n            <div className=\"my_post\" key={id}>\r\n                <div className=\"post_header\">\r\n                    <div className=\"right\">\r\n                    <Avatar \r\n                            alt={post.username ? post.username : ''}  \r\n                            className='avatar'\r\n                            src=\"/static/images/avatar/1.jpg\"\r\n                            />\r\n                        <h3>{post.username}</h3>\r\n                    </div>\r\n                    <div className=\"left\">\r\n                    <i className=\"far fa-edit\" onClick={()=> navigate(`/Post/${ids[id]}/Edit`)}/>\r\n                    <i className=\"far fa-trash-alt\" onClick={()=> Delete(ids[id])}></i>\r\n                    </div>\r\n                   \r\n                </div>\r\n                <div className=\"post_image\">\r\n                    <Slider {...settings} className='slider'>\r\n                    {Object.keys(post.imagesUrl).length !== 0 && post.imagesUrl.map((image,i) =>{\r\n                        return(\r\n                            <img key={i} src={image} alt=\"\" />\r\n                        )\r\n                    })}\r\n                    \r\n                    \r\n                    </Slider>\r\n                </div>\r\n                <div className=\"post_date\">\r\n                    <p>\r\n                    {/* {date.getMonth() + 1}/{date.getDate()}/{date.getFullYear()} || {date.getHours()}:{date.getMinutes()}   */}\r\n\r\n                    {/* {date.getFullYear()} */}\r\n                    </p>\r\n                    \r\n                </div>\r\n            </div>\r\n            )\r\n            }\r\n        })}\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyPosts\r\n"]},"metadata":{},"sourceType":"module"}